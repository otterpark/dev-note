# media query

`media query`의 양은 경험을 저하시킬 수 있습니다. 또한 소수를 위한 `breakpoints` 너무 많으면 전체적인 레이아웃을 구축하는 데 방해가 될 수 있습니다.

따라서 디바이스가 아닌 디자인을 기준으로 `breakpoints`을 정의 해보려고 한다.

```css
// X-소형 디바이스(세로형 휴대폰, 576픽셀 미만)

// 소형 디바이스(가로형 휴대폰, 576픽셀 이상)
@media (min-width: 576px) { ... }

// 중형 디바이스(태블릿, 768픽셀 이상)
@media (min-width: 768px) { ... }

// 대형 디바이스(데스크톱, 992px 이상)
@media (min-width: 992px) { ... }

// X-대형 디바이스(대형 데스크톱, 1200px 이상)
@media (min-width: 1200px) { ... }

// XX-대형 디바이스(대형 데스크톱, 1400px 이상)
@media (min-width: 1400px) { ... }
```

위와 같은 방식은 우리가 흔히 아는 모바일 퍼스트 방식이다. 이와 다른 방법으로는 `max-width`를 쓰는 방법이다.

```css
// X-소형 디바이스(세로형 휴대폰, 576px 미만)
@media (max-width: 575.98px) { ... }

// 소형 디바이스(가로형 휴대폰, 768px 미만)
@media (max-width: 767.98px) { ... }

// 중형 디바이스(태블릿, 992px 미만)
@media (max-width: 991.98px) { ... }

// 대형 디바이스(데스크톱, 1200px 미만)
@media (max-width: 1199.98px) { ... }

// 대형 기기(대형 데스크톱, 1400px 미만)
@media (max-width: 1399.98px) { ... }
```

위와 같은 방식으로 최대 너비를 사용하여 `breakpoints`를 결정할 수 있다.

> 💡 근데 특이한 점은 왜 기존 `breakpoints`에서 0.02px을 뺀 것인가?
>
> 브라우저는 현재 범위 컨텍스트 쿼리를 지원하지 않으므로 더 높은 정밀도의 값을 사용하여 분수 너비 (예 : 높은 dpi 기기의 특정 조건에서 발생할 수 있음)가 있는 min- 및 max- 접두사 및 뷰포트 의 제한 사항을 해결해준다.

조금 더 공식적인 문서를 살펴보면 `W3C`에서도 아래와 같이 설명하고 있다.

<https://www.w3.org/TR/mediaqueries-4/#mq-min-max>

> "min-"과 "max-"은 모두 값을 포함하는 범위 비교와 동일하므로 특정 상황에서는 제한적일 수 있습니다.

이 전체적인 방법을 정리해보면 예를 들어 아래 예시로 설명을 해보려고 한다.

```css
@media (max-width: 320px) { /* 뷰포트용 스타일 <= 320px */ }
@media (min-width: 321px) { /* 뷰포트용 스타일 >= 321px */ }
```

만약 이런 미디어 쿼리가 있다고 해보자. 

위 방법은 괜찮지만 뷰포트 크기가 `분수`일 가능성을 고려하지 않습니다. 이는 정수가 아닌 `픽셀`에서 문제가 발생할 수 있습니다. 이로인해 `0.02픽셀`을 추가하여 `'크랙'`사이에 놓이는 뷰포트를 줄임으로써 `Safari/iOS 버그`를 해결하는 것입니다.

```css
@media (max-width: 320px) { /* 뷰포트용 스타일 <= 320px */ }
@media (min-width: 320.02px) { /* 뷰포트용 스타일 >= 320.02px */ }
```

## CSS Framework에서는 어떻게 break-points를 가져가고 있을까?

개인적으로 CSS Framework를 만든 사람들에 대해서 이 분들은 이거 하나만을 연구하고 만들었던 사람들이라 참고하기에 좋다고 생각하여 비교를 해보았다.

|**Framework**|**Small**|**Medium**|**Large**|**Extra large**|
|Bulma|-|min: 769px (“mobile”)|min: 1024px (“desktop”)|min: 1216px (“fullhd”)|
|Bootstrap 4|min: 576px|min: 768px|min: 992px|min: 1200px|
|Tailwind|min: 576px|min: 768px|min: 992px|min: 1200px|
|Zurb Foundation|-|min: 640px|min: 1024px|min: 1200px|

## 반응형 디자인을 하기위한 Tip

### 1. `em` 보다는 `rem`을 사용하자

반응형 디자인에는 `em`이나 `px` 대신 `rem`을 사용하는 것이 좋습니다. `rem`으로 작업 시 디자인이 기기 화면 크기에 맞게 흐르도록 합니다.

- `rem`: 루트 요소의 글꼴 크기를 기준으로 계산된 상대값입니다.

- `em`: 부모 요소의 글꼴 크기를 기준으로 대소문자를 구분한 상대적 계산 값입니다.

대부분의 브라우저에서 기본 글꼴 크기는 `14 ~ 16px`이므로 `1rem`은 `14 ~ 16px`이 됩니다. `em`을 사용하면 크기가 부모 요소를 기반으로 하고 `Cascade`가 발생할 수 있으므로 예상치 못한 결과가 발생할 수 있습니다.(예: 중첩된 요소가 추가될수록 글꼴 크기가 점차 커짐).

### 2. 모바일 first, 데스트탑 first에 따라 `max-width`를 쓸지 `min-width`를 쓸지 고민하자

모바일 우선 디자인에서는 `max-width` 보다는 `min-width`를 기준으로 디자인하는 것이 좋으며, 기존 데스크톱 디자인에 mobile 미디어 쿼리를 추가할 때는 `max-width`를 사용하는 것이 좋습니다.
