# useEffect()

`useEffect()`ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•  ìˆ˜ ìˆëŠ” React hookì…ë‹ˆë‹¤.

## Reference

```tsx
useEffect(setup, dependencies?)
```

- ì»´í¬ë„ŒíŠ¸ ìµœìƒìœ„ì—ì„œ `useEffect`ë¥¼ ì‚¬ìš©í•˜ì—¬, ì´í™íŠ¸ë¥¼ ì„ ì–¸í•©ë‹ˆë‹¤.

### 1. Parameters

### `setup`

ì´í™íŠ¸ì˜ ë¡œì§ì´ í¬í•¨ëœ í•¨ìˆ˜ì…ë‹ˆë‹¤. `setup` í•¨ìˆ˜ëŠ” ì„ íƒì ìœ¼ë¡œ `cleanup` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ DOMì—ì„œ ì²˜ìŒ ì¶”ê°€ë˜ë©´ ReactëŠ” `setup` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ë³€ê²½ëœ ì¢…ì†ì„±ìœ¼ë¡œ ë¦¬ë Œë”ë§ í• ë•Œë§ˆë‹¤ ReactëŠ” ë¨¼ì € ì´ì „ ê°’ìœ¼ë¡œ `cleanup` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œ ë‹¤ìŒ ìƒˆ ê°’ìœ¼ë¡œ `setup`í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ DOMì—ì„œ ì œê±°ëœ í›„ ReactëŠ” ë§ˆì§€ë§‰ `cleanup` í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

### ì„ íƒì  ì˜ì¡´ì„±

`setup` ì½”ë“œ ë‚´ì—ì„œ ì°¸ì¡°ëœ ëª¨ë“  `reactive values`ì˜ ëª©ë¡ì…ë‹ˆë‹¤. `reactive values`ì—ëŠ” `Props`, `state`, `ì»´í¬ë„ŒíŠ¸ ë³¸ë¬¸ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ì™€ í•¨ìˆ˜`ê°€ í¬í•¨ë©ë‹ˆë‹¤. `lint`ê°€ `React Config`ë¡œ êµ¬ì„±ëœ ê²½ìš°, ëª¨ë“  `reactive values`ì´ ì¢…ì†ì„±ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ì§€ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤. ì˜ì¡´ì„± ëª©ë¡ì—ëŠ” ì¼ì •í•œ ìˆ˜ì˜ í•­ëª©ì´ ìˆì–´ì•¼ í•˜ë©° `[dep1, dep2, dep3]`ê³¼ ê°™ì´ ì¸ë¼ì¸ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤. ReactëŠ” `Object.is` ë¹„êµë¥¼ ì‚¬ìš©í•˜ì—¬ ê° ì˜ì¡´ì„±ì„ ì´ì „ ê°’ê³¼ ë¹„êµí•©ë‹ˆë‹¤. ì´ ì¸ìˆ˜ë¥¼ ìƒëµí•˜ë©´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•  ë•Œë§ˆë‹¤ `Effect`ê°€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì˜ì¡´ì„± ë°°ì—´ì„ ì „ë‹¬í•  ë•Œì™€ ë¹ˆ ë°°ì—´ì„ ì „ë‹¬í•  ë•Œ, ê·¸ë¦¬ê³  ì˜ì¡´ì„±ì„ ì „í˜€ ì „ë‹¬í•˜ì§€ ì•Šì„ ë•Œì˜ ì°¨ì´ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”.

### 2. Return

useEffectëŠ” `undefined`ë¥¼ ë¦¬í„´í•œë‹¤.

### 3. ì£¼ì˜ì‚¬í•­

#### 1. ğŸ’¡ `useEffect()`ì€ hookì´ë¯€ë¡œ, ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ë ˆë²¨ì´ë‚˜ ìì²´ hookì—ì„œë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤

ë£¨í”„ë‚˜ ì¡°ê±´ ë‚´ë¶€ì—ì„œëŠ” í˜¸ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í•„ìš”í•œ ê²½ìš° ìƒˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  ìƒíƒœë¥¼ ê·¸ ì•ˆìœ¼ë¡œ ì˜®ê²¨ì•¼í•©ë‹ˆë‹¤.

#### 2. ğŸ’¡ ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ë™ê¸°í™”í•˜ë ¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ë©´ `Effect`ê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤

#### 3. ğŸ’¡ `StrictMode`ê°€ ì¼œì ¸ ìˆìœ¼ë©´ ReactëŠ” ì²« ë²ˆì§¸ ì‹¤ì œ ì„¤ì • ì „ì— ê°œë°œ ì „ìš© `setup`+ `cleanup` ì‚¬ì´í´ì„ í•œ ë²ˆ ë” ì‹¤í–‰í•©ë‹ˆë‹¤

`cleanup` ë¡œì§ì´ `setup` ë¡œì§ì„ `ë¯¸ëŸ¬ë§`í•˜ê³  ì„¤ì •ì´ ìˆ˜í–‰ ì¤‘ì¸ ëª¨ë“  ì‘ì—…ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ì·¨ì†Œí•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ `ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸(ì‹ ì¤‘í•˜ê³  ë©´ë°€í•œ í…ŒìŠ¤íŠ¸)`ì…ë‹ˆë‹¤. ë¬¸ì œê°€ ë°œìƒí•˜ë©´ `cleanup` ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì„¸ìš”.

#### 4. ğŸ’¡ ì˜ì¡´ì„± ì¤‘ ì¼ë¶€ê°€ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— ì •ì˜ëœ ê°ì²´ ë˜ëŠ” í•¨ìˆ˜ì¸ ê²½ìš°, `Effect`ê°€ í•„ìš” ì´ìƒìœ¼ë¡œ ìì£¼ ë‹¤ì‹œ ì‹¤í–‰ë  ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤

 ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ ë¶ˆí•„ìš”í•œ ê°ì²´ ë° í•¨ìˆ˜ ì˜ì¡´ì„±ì„ ì œê±°í•˜ì„¸ìš”. ë˜í•œ `ìƒíƒœ ì—…ë°ì´íŠ¸(extract state updates)`ì™€ `ë¹„ë°˜ì‘í˜• ë¡œì§(non-reactive logic)`ì„ ì´í™íŠ¸ ì™¸ë¶€ë¡œ ì¶”ì¶œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

#### 5. ğŸ’¡ `Effect` ê°€ ì‹œê°ì ì¸ ì‘ì—…ì„ í•˜ê³  ìˆëŠ” ì¤‘ ì§€ì—°ì´ ëˆˆì— ë„ëŠ” ê²½ìš°(ê¹œë°•ì„ í˜„ìƒ) `useEffect` => `useLayoutEffect`ë¡œ êµì²´í•˜ì„¸ìš”

í´ë¦­ê³¼ ê°™ì€ ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì¸í•´ ì´í™íŠ¸ê°€ ë°œìƒí•œ ê²ƒì´ ì•„ë‹ˆë¼ë©´, ReactëŠ” `Effect`ë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì— ë¸Œë¼ìš°ì €ê°€ ì—…ë°ì´íŠ¸ëœ í™”ë©´ì„ ë¨¼ì € ê·¸ë¦¬ë„ë¡ í•  ê²ƒì…ë‹ˆë‹¤.

#### 6. ğŸ’¡ ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ëŠ” ê²ƒì„ ì°¨ë‹¨í•´ì•¼ í•˜ëŠ” ê²½ìš° `useEffect`ë¥¼ `useLayoutEffect`ë¡œ êµì²´í•˜ì„¸ìš”

í´ë¦­ê³¼ ê°™ì€ ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ì¸í•´ ì´í™íŠ¸ê°€ ë°œìƒí–ˆë”ë¼ë„ ë¸Œë¼ìš°ì €ëŠ” ì´í™íŠ¸ ë‚´ë¶€ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ì „ì— í™”ë©´ì„ ë‹¤ì‹œ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 7. ğŸ’¡ `Effect`ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ ì‹¤í–‰ë˜ë©° ì„œë²„ ë Œë”ë§ì—ì„œëŠ” ì‹¤í–‰ì´ ë¶ˆê°€í•©ë‹ˆë‹¤

## ì‚¬ìš©ë²•

### ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°

ì¼ë¶€ ì»´í¬ë„ŒíŠ¸ëŠ” í˜ì´ì§€ì— í‘œì‹œë˜ëŠ” ë™ì•ˆ `ë„¤íŠ¸ì›Œí¬`, `ì¼ë¶€ ë¸Œë¼ìš°ì € API` ë˜ëŠ” `íƒ€ì‚¬ ë¼ì´ë¸ŒëŸ¬ë¦¬`ì— ì—°ê²°ëœ ìƒíƒœë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹œìŠ¤í…œì€ Reactì—ì„œ ì œì–´ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ `ì™¸ë¶€(external)`ë¼ê³  í•©ë‹ˆë‹¤.

ì»´í¬ë„ŒíŠ¸ë¥¼ ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°í•˜ë ¤ë©´ ì»´í¬ë„ŒíŠ¸ì˜ ìµœìƒìœ„ ìˆ˜ì¤€ì—ì„œ `useEffect`ë¥¼ í˜¸ì¶œí•˜ì„¸ìš”.

```tsx
import { useEffect } from 'react';
import { createConnection } from './chat.js';

function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');

  useEffect(() => {
   const connection = createConnection(serverUrl, roomId);
    connection.connect();
   return () => {
      connection.disconnect();
   };
  }, [serverUrl, roomId]);
  // ...
}
```

useEffectì— ë‘ ê°œì˜ ì¸ìˆ˜ë¥¼ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.

1. í•´ë‹¹ ì‹œìŠ¤í…œì— ì—°ê²°í•˜ëŠ” `setup` ì½”ë“œê°€ í¬í•¨ëœ ì„¤ì • í•¨ìˆ˜.
  
    > í•´ë‹¹ ì‹œìŠ¤í…œê³¼ì˜ ì—°ê²°ì„ ëŠëŠ” ì •ë¦¬ ì½”ë“œê°€ í¬í•¨ëœ `cleanup` í•¨ìˆ˜ë¥¼ ë°˜í™˜í•´ì•¼ í•©ë‹ˆë‹¤.
  
2. í•´ë‹¹ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©ëœ ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ê°’ì„ í¬í•¨í•œ ì˜ì¡´ì„± ëª©ë¡.

**ReactëŠ” í•„ìš”í•  ë•Œë§ˆë‹¤ `setup` ë° `cleanup` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©°, ì´ëŠ” ì—¬ëŸ¬ ë²ˆ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

1. ì»´í¬ë„ŒíŠ¸ê°€ í˜ì´ì§€ì— ì¶”ê°€(ë§ˆìš´íŠ¸)ë  ë•Œ ì„¤ì • ì½”ë“œê°€ ì‹¤í–‰ë©ë‹ˆë‹¤.

2. ì˜ì¡´ì„±ì´ ë³€ê²½ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì‹¤í–‰ë©ë‹ˆë‹¤.
    - ë¨¼ì € ì •ë¦¬ ì½”ë“œê°€ ì´ì „ í”„ë¡œí¼í‹°ì™€ ìƒíƒœë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    - ê·¸ëŸ° ë‹¤ìŒ ì„¤ì • ì½”ë“œê°€ ìƒˆ í”„ë¡œí¼í‹°ì™€ ìƒíƒœë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

3. ì»´í¬ë„ŒíŠ¸ê°€ í˜ì´ì§€ì—ì„œ ì œê±°(ë§ˆìš´íŠ¸ í•´ì œ)ëœ í›„ `cleanup` ì½”ë“œê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ í•œ ë²ˆ ì‹¤í–‰ë©ë‹ˆë‹¤.

ìœ„ ìˆœì„œì— ëŒ€í•´ ì„¤ëª…í•´ ë³´ê² ìŠµë‹ˆë‹¤.

ìœ„ì˜ `ChatRoom` ì»´í¬ë„ŒíŠ¸ê°€ í˜ì´ì§€ì— ì¶”ê°€ë˜ë©´ ì´ˆê¸° `serverUrl` ë° `roomId`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì±„íŒ…ë°©ì— ì—°ê²°ë©ë‹ˆë‹¤. ë‹¤ì‹œ ë Œë”ë§í•œ ê²°ê³¼ `serverUrl` ë˜ëŠ” `roomId`ê°€ ë³€ê²½ë˜ë©´(ì˜ˆ: ì‚¬ìš©ìê°€ ë“œë¡­ë‹¤ìš´ì—ì„œ ë‹¤ë¥¸ ì±„íŒ…ë°©ì„ ì„ íƒí•˜ëŠ” ê²½ìš°) `Effect`ëŠ” ì´ì „ ì±„íŒ…ë°©ê³¼ì˜ ì—°ê²°ì„ ëŠê³  ë‹¤ìŒ ì±„íŒ…ë°©ì— ì—°ê²°í•©ë‹ˆë‹¤. ì±„íŒ…ë°© ì»´í¬ë„ŒíŠ¸ê°€ í˜ì´ì§€ì—ì„œ ì œê±°ë˜ë©´ `Effect`ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.

ë²„ê·¸ë¥¼ ì°¾ëŠ” ë° ë„ì›€ì„ ì£¼ê¸° ìœ„í•´ ê°œë°œ ë‹¨ê³„ì—ì„œ ReactëŠ” ì„¤ì • ì „ì— `setup` ë° `cleanup`ì„ í•œ ë²ˆ ë” ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ëŠ” `Effect`ì˜ ë¡œì§ì´ ì˜¬ë°”ë¥´ê²Œ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” `ìŠ¤íŠ¸ë ˆìŠ¤ í…ŒìŠ¤íŠ¸(ì‹ ì¤‘í•˜ê³  ë©´ë°€í•œ í…ŒìŠ¤íŠ¸)`ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ëˆˆì— ë³´ì´ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤ë©´ `cleanup` í•¨ìˆ˜ì— ì¼ë¶€ ë¡œì§ì´ ëˆ„ë½ëœ ê²ƒì…ë‹ˆë‹¤. `cleanup` ê¸°ëŠ¥ì€ `setup` ê¸°ëŠ¥ì´ ìˆ˜í–‰í•˜ë˜ ì‘ì—…ì„ ì¤‘ì§€í•˜ê±°ë‚˜ ì‹¤í–‰ ì·¨ì†Œí•´ì•¼ í•©ë‹ˆë‹¤. ê²½í—˜ìƒ ì‚¬ìš©ìê°€ í”„ë¡œë•ì…˜ì—ì„œì™€ ê°™ì´ í•œ ë²ˆ í˜¸ì¶œë˜ëŠ” ì„¤ì •ê³¼ ê°œë°œì—ì„œì™€ ê°™ì´ `setup` â†’ `cleanup` â†’ `setup` ìˆœì„œë¥¼ êµ¬ë¶„í•  ìˆ˜ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ì¸ í•´ê²° ë°©ë²•ì„ ì°¸ì¡°í•˜ì„¸ìš”.

ëª¨ë“  `Effect`ë¥¼ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ë¡œ ì‘ì„±í•˜ê³  í•œ ë²ˆì— í•˜ë‚˜ì˜`setup`/`cleanup` ì£¼ê¸°ë¥¼ ìƒê°í•˜ì„¸ìš”. ì»´í¬ë„ŒíŠ¸ê°€ `ë§ˆìš´íŠ¸`, `ì—…ë°ì´íŠ¸`, `ë§ˆìš´íŠ¸ í•´ì œ ì¤‘ì¸ì§€ ì—¬ë¶€`ëŠ” ì¤‘ìš”í•˜ì§€ ì•Šì•„ì•¼ í•©ë‹ˆë‹¤. `cleanup` ë¡œì§ì´ `setup` ë¡œì§ì„ ì˜¬ë°”ë¥´ê²Œ `ë¯¸ëŸ¬ë§`í•˜ë©´ í•„ìš”í•œ ë§Œí¼ ìì£¼ `setup`ê³¼ `cleanup`ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íƒ„ë ¥ì ì¸ íš¨ê³¼ê°€ ë©ë‹ˆë‹¤.

`Effect`ë¥¼ ì‚¬ìš©í•˜ë©´ **êµ¬ì„± ìš”ì†Œë¥¼ ì¼ë¶€ ì™¸ë¶€ ì‹œìŠ¤í…œ(ì˜ˆ: ì±„íŒ… ì„œë¹„ìŠ¤)ê³¼ ë™ê¸°í™”** í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì™¸ë¶€ ì‹œìŠ¤í…œì€ ë‹¤ìŒê³¼ ê°™ì´ Reactì— ì˜í•´ ì œì–´ë˜ì§€ ì•ŠëŠ” ëª¨ë“  ì½”ë“œë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

- `setInterval()` ë° `clearInterval()`ë¡œ ê´€ë¦¬ë˜ëŠ” íƒ€ì´ë¨¸.
- `window.addEventListener()` ë° `window.removeEventListener()`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ë²¤íŠ¸ êµ¬ë….
- `animation.start()` ë° `animation.reset()`ê³¼ ê°™ì€ APIê°€ ìˆëŠ” íƒ€ì‚¬ ì• ë‹ˆë©”ì´ì…˜ ë¼ì´ë¸ŒëŸ¬ë¦¬.

ì™¸ë¶€ ì‹œìŠ¤í…œì— ì—°ê²°í•˜ì§€ ì•ŠëŠ” ê²½ìš° Effectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ì»¤ìŠ¤í…€ í›…ì˜ ë˜í•‘ íš¨ê³¼

`Effect`ëŠ” `íƒˆì¶œêµ¬`ì…ë‹ˆë‹¤. `"Reactë¥¼ ë²—ì–´ë‚˜ì•¼ í•  ë•Œ"`, ê·¸ë¦¬ê³  `ì‚¬ìš© ì‚¬ë¡€ì— ë” ë‚˜ì€ ë‚´ì¥ ì†”ë£¨ì…˜ì´ ì—†ì„ ë•Œ ì‚¬ìš©`í•©ë‹ˆë‹¤. `Effects`ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìì£¼ ë°œìƒí•œë‹¤ë©´, ì¼ë°˜ì ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ê°€ ì˜ì¡´í•˜ëŠ” ì¼ë°˜ì ì¸ ë™ì‘ì— ëŒ€í•œ ì‚¬ìš©ì ì •ì˜ hookì„ ì¶”ì¶œí•´ì•¼ í•œë‹¤ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, ì´ `useChatRoom` ì»¤ìŠ¤í…€ hookì€ ë³´ë‹¤ ì„ ì–¸ì ì¸ API ë’¤ì— `Effect`ì˜ ë¡œì§ì„ `"ìˆ¨ê¹ë‹ˆë‹¤"`:

```tsx
function useChatRoom({ serverUrl, roomId }) {
  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId, serverUrl]);
}
```

ê·¸ëŸ° ë‹¤ìŒ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ ì´ì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');

  useChatRoom({
    roomId: roomId,
    serverUrl: serverUrl
  });
  // ...
```

ë˜í•œ `React ìƒíƒœê³„`ì—ëŠ” ëª¨ë“  ìš©ë„ì— ë§ëŠ” í›Œë¥­í•œ ì»¤ìŠ¤í…€ Hookì´ ë§ì´ ìˆìŠµë‹ˆë‹¤.

## Reactê°€ ì•„ë‹Œ ì™¸ë¶€ ìœ„ì ¯ ì œì–´í•˜ê¸°

ë•Œë¡œëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œì„ ì»´í¬ë„ŒíŠ¸ì˜ ì¼ë¶€ `Props`ë‚˜ `State`ë¥¼ ë™ê¸°í™”ì‹œí‚¤ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, React ì—†ì´ ì‘ì„±ëœ íƒ€ì‚¬ ë§µ ìœ„ì ¯ì´ë‚˜ ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ `Effect`ë¥¼ ì‚¬ìš©í•´ ê·¸ ìƒíƒœë¥¼ React ì»´í¬ë„ŒíŠ¸ì˜ í˜„ì¬ ìƒíƒœì™€ ì¼ì¹˜ì‹œí‚¤ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ `Effect`ëŠ” `map-widget.js`ì— ì •ì˜ëœ `MapWidget` í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. `Map` ì»´í¬ë„ŒíŠ¸ì˜ `zoomLevel` í”„ë¡œí¼í‹°ë¥¼ ë³€ê²½í•˜ë©´ `Effect`ëŠ” í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ `setZoom()`ì„ í˜¸ì¶œí•˜ì—¬ **ë™ê¸°í™” ìƒíƒœ**ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤

### App.js

```tsx
import { useState } from 'react';
import Map from './Map.js';

export default function App() {
  const [zoomLevel, setZoomLevel] = useState(0);
  return (
    <>
      Zoom level: {zoomLevel}x
      <button onClick={() => setZoomLevel(zoomLevel + 1)}>+</button>
      <button onClick={() => setZoomLevel(zoomLevel - 1)}>-</button>
      <hr />
      <Map zoomLevel={zoomLevel} />
    </>
  );
}
```

### Map.js

```tsx
import { useRef, useEffect } from 'react';
import { MapWidget } from './map-widget.js';

export default function Map({ zoomLevel }) {
  const containerRef = useRef(null);
  const mapRef = useRef(null);

  useEffect(() => {
    if (mapRef.current === null) {
      mapRef.current = new MapWidget(containerRef.current);
    }

    const map = mapRef.current;
    map.setZoom(zoomLevel);
  }, [zoomLevel]);

  return (
    <div
      style={{ width: 200, height: 200 }}
      ref={containerRef}
    />
  );
}
```

### map-widget.js

```tsx
import { useRef, useEffect } from 'react';
import { MapWidget } from './map-widget.js';

export default function Map({ zoomLevel }) {
  const containerRef = useRef(null);
  const mapRef = useRef(null);

  useEffect(() => {
    if (mapRef.current === null) {
      mapRef.current = new MapWidget(containerRef.current);
    }

    const map = mapRef.current;
    map.setZoom(zoomLevel);
  }, [zoomLevel]);

  return (
    <div
      style={{ width: 200, height: 200 }}
      ref={containerRef}
    />
  );
}
```

ì´ ì˜ˆì œì—ì„œëŠ” `MapWidget` í´ë˜ìŠ¤ê°€ ìì‹ ì—ê²Œ ì „ë‹¬ëœ DOM ë…¸ë“œë§Œ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— `cleanup` í•¨ìˆ˜ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. `Map` React ì»´í¬ë„ŒíŠ¸ê°€ íŠ¸ë¦¬ì—ì„œ ì œê±°ëœ í›„, DOM ë…¸ë“œì™€ `MapWidget` í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë¸Œë¼ìš°ì € ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì— ì˜í•´ **ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ìˆ˜ì§‘**ë©ë‹ˆë‹¤.

## Effect ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

`Effect`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° í”„ë ˆì„ì›Œí¬ì˜ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ê³¼ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ íš¨ìœ¨ì ì´ë¼ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”.

`Effect`ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.

```tsx
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);

  useEffect(() => {
    let ignore = false;
    setBio(null);
    fetchBio(person).then(result => {
      if (!ignore) {
        setBio(result);
      }
    });
    return () => {
      ignore = true;
    };
  }, [person]);

  // ...
```

`ignore` ë³€ìˆ˜ëŠ” ê±°ì§“ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ê³  ì •ë¦¬ ì¤‘ì— ì°¸ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ë„¤íŠ¸ì›Œí¬ ì‘ë‹µì´ ë³´ë‚¸ ìˆœì„œì™€ ë‹¤ë¥¸ ìˆœì„œë¡œ ë„ì°©í•  ìˆ˜ ìˆëŠ” `'ê²½í•© ì¡°ê±´(race conditions)'`ì´ ì½”ë“œì— ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```tsx
import { useState, useEffect } from 'react';
import { fetchBio } from './api.js';

export default function Page() {
  const [person, setPerson] = useState('Alice');
  const [bio, setBio] = useState(null);
  useEffect(() => {
    let ignore = false;
    setBio(null);
    fetchBio(person).then(result => {
      if (!ignore) {
        setBio(result);
      }
    });
    return () => {
      ignore = true;
    }
  }, [person]);

  return (
    <>
      <select value={person} onChange={e => {
        setPerson(e.target.value);
      }}>
        <option value="Alice">Alice</option>
        <option value="Bob">Bob</option>
        <option value="Taylor">Taylor</option>
      </select>
      <hr />
      <p><i>{bio ?? 'Loading...'}</i></p>
    </>
  );
}
```

`async / await` êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ì‹œ ì‘ì„±í•  ìˆ˜ë„ ìˆì§€ë§Œ ì—¬ì „íˆ `cleanup` í•¨ìˆ˜ë¥¼ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤.

`Effects`ì—ì„œ **ì§ì ‘ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…ì„ ë°˜ë³µì ìœ¼ë¡œ ì‘ì„±í•˜ë©´ ë‚˜ì¤‘ì— ìºì‹± ë° ì„œë²„ ë Œë”ë§ê³¼ ê°™ì€ ìµœì í™”ë¥¼ ì¶”ê°€í•˜ê¸°ê°€ ì–´ë ¤ì›Œ**ì§‘ë‹ˆë‹¤. ì§ì ‘ ë§Œë“¤ê±°ë‚˜ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ìœ ì§€ ê´€ë¦¬í•˜ëŠ” `ì»¤ìŠ¤í…€ Hook`ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì‰½ìŠµë‹ˆë‹¤.

### ğŸ’¡ Effectsì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ëŒ€ì•ˆì€ ë¬´ì—‡ì¸ê°€ìš”?

í´ë¼ì´ì–¸íŠ¸ ì¸¡ ì•±ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ `Effects` ë‚´ì—ì„œ ê°€ì ¸ì˜¤ê¸° í˜¸ì¶œì„ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” **ë§¤ìš° ìˆ˜ë™ì ì¸ ì ‘ê·¼ ë°©ì‹**ì´ë©° **ìƒë‹¹í•œ ë‹¨ì **ì´ ìˆìŠµë‹ˆë‹¤.

- `Effects`ëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ì´ˆê¸° ì„œë²„ì—ì„œ ë Œë”ë§ë˜ëŠ” HTMLì—ëŠ” ë°ì´í„°ê°€ ì—†ëŠ” **ë¡œë”© ìƒíƒœë§Œ í¬í•¨**ë©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ ì»´í“¨í„°ëŠ” ëª¨ë“  JavaScriptë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê³  ì•±ì„ ë Œë”ë§í•´ì•¼ë§Œ ì´ì œ ë°ì´í„°ë¥¼ ë¡œë“œí•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë©ë‹ˆë‹¤. ì´ëŠ” ë§¤ìš° íš¨ìœ¨ì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.
- `Effects`ì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´ `"ë„¤íŠ¸ì›Œí¬ ì›Œí„°í´ - Waterfall"`ë¥¼ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©´ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ê°€ ì¼ë¶€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê³ , ìì‹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ë©´ ìì‹ ì»´í¬ë„ŒíŠ¸ê°€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ì‹œì‘í•©ë‹ˆë‹¤.
- ë„¤íŠ¸ì›Œí¬ê°€ ë§¤ìš° ë¹ ë¥´ì§€ ì•Šì€ ê²½ìš° ëª¨ë“  ë°ì´í„°ë¥¼ ë³‘ë ¬ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ëŠë¦½ë‹ˆë‹¤.
íš¨ê³¼ì—ì„œ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ ì¼ë°˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ìºì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë¥¼ í•´ì œí–ˆë‹¤ê°€ ë‹¤ì‹œ ë§ˆìš´íŠ¸í•˜ë©´ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì™€ì•¼ í•©ë‹ˆë‹¤.
- `'ê²½í•© ì¡°ê±´(race conditions)'` `fetch`ì™€ ê°™ì€ ë²„ê·¸ê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ” ë°©ì‹ìœ¼ë¡œ íŒ¨ì¹˜ í˜¸ì¶œì„ ì‘ì„±í•˜ë ¤ë©´ ìƒìš©êµ¬ ì½”ë“œê°€ ìƒë‹¹íˆ ë§ì´ í•„ìš”í•©ë‹ˆë‹¤.

ì´ëŸ¬í•œ ë‹¨ì ë“¤ì€ Reactì—ë§Œ êµ­í•œëœ ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤. ëª¨ë“  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œ ë§ˆìš´íŠ¸ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ì ìš©ë©ë‹ˆë‹¤. **ë¼ìš°íŒ…ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°ë„ ì œëŒ€ë¡œ ìˆ˜í–‰í•˜ê¸°ê°€ ì‰½ì§€ ì•Šìœ¼ë¯€ë¡œ** ë‹¤ìŒê³¼ ê°™ì€ ì ‘ê·¼ ë°©ì‹ì„ ê¶Œì¥í•©ë‹ˆë‹¤:

1. í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°, í”„ë ˆì„ì›Œí¬ì— ë‚´ì¥ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë©”ì»¤ë‹ˆì¦˜ì„ ì‚¬ìš©í•˜ì„¸ìš”. ìµœì‹  React í”„ë ˆì„ì›Œí¬ì—ëŠ” íš¨ìœ¨ì ì´ê³  ìœ„ì˜ í•¨ì •ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” í†µí•© ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ë©”ì»¤ë‹ˆì¦˜ì´ ìˆìŠµë‹ˆë‹¤.
2. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ í´ë¼ì´ì–¸íŠ¸ ì¸¡ ìºì‹œë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ë¹Œë“œí•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì„¸ìš”. ì¸ê¸° ìˆëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ ì†”ë£¨ì…˜ìœ¼ë¡œëŠ” `React Query`, `useSWR`, `React Router 6.4+` ë“±ì´ ìˆìŠµë‹ˆë‹¤. ìì²´ ì†”ë£¨ì…˜ì„ êµ¬ì¶•í•  ìˆ˜ë„ ìˆëŠ”ë°, ì´ ê²½ìš° ë‚´ë¶€ì ìœ¼ë¡œ `Effects`ë¥¼ ì‚¬ìš©í•˜ë˜ `ìš”ì²­ ì¤‘ë³µ ì œê±°`, `ì‘ë‹µ ìºì‹±`, `ë„¤íŠ¸ì›Œí¬ ì›Œí„°í´ ë°©ì§€(ë°ì´í„°ë¥¼ ë¯¸ë¦¬ ë¡œë“œí•˜ê±°ë‚˜ ë°ì´í„° ìš”êµ¬ ì‚¬í•­ì„ ê²½ë¡œì— ì˜¬ë ¤ì„œ)`ë¥¼ ìœ„í•œ ë¡œì§ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ ë‘ ê°€ì§€ ì ‘ê·¼ ë°©ì‹ì´ ëª¨ë‘ ì í•©í•˜ì§€ ì•Šì€ ê²½ìš° `Effects`ì—ì„œ ì§ì ‘ ë°ì´í„°ë¥¼ ê³„ì† ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë°˜ì‘í˜• ì˜ì¡´ì„± ì§€ì •

`Effect`ì˜ ì˜ì¡´ì„±ì„ `"ì„ íƒ"`í•  ìˆ˜ ì—†ë‹¤ëŠ” ì ì— ìœ ì˜í•˜ì„¸ìš”. `Effect`ì˜ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ë°˜ì‘í˜• ê°’ì€ ì˜ì¡´ì„±ìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•©ë‹ˆë‹¤. `Effect`ì˜ ì˜ì¡´ì„± ëª©ë¡ì€ ì£¼ë³€ ì½”ë“œì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.

```tsx
function ChatRoom({ roomId }) { // ë°˜ì‘í˜• ê°’
  const [serverUrl, setServerUrl] = useState('https://localhost:1234'); // ë°˜ì‘í˜• ê°’

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId); // EffectëŠ” ë‘ ë°˜ì‘í˜• ê°’ì„ ì½ëŠ”ë‹¤.
    connection.connect();
    return () => connection.disconnect();
  }, [serverUrl, roomId]); // âœ… ë”°ë¼ì„œ Effectì˜ ì˜ì¡´ì„±ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.
  // ...
}
```

`serverUrl` ë˜ëŠ” `roomId`ê°€ ë³€ê²½ë˜ë©´ `Effect`ê°€ ìƒˆ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì±„íŒ…ì— ë‹¤ì‹œ ì—°ê²°ë©ë‹ˆë‹¤.

`ë°˜ì‘í˜• ê°’`ì—ëŠ” `Props`ì™€ `ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì§ì ‘ ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ ë° í•¨ìˆ˜ê°€ í¬í•¨`ë©ë‹ˆë‹¤. `roomId`ì™€ `serverUrl`ì€ `ë°˜ì‘í˜• ê°’`ì´ë¯€ë¡œ ì˜ì¡´ì„±ì—ì„œ ì œê±°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ ê°’ì„ ìƒëµí•˜ë ¤ê³  ì‹œë„í•  ë•Œ `linter`ê°€ Reactì— ëŒ€í•´ ì˜¬ë°”ë¥´ê²Œ êµ¬ì„±ë˜ë©´, `linter`ëŠ” ì´ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ì‹¤ìˆ˜ë¡œ í”Œë˜ê·¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

```tsx
function ChatRoom({ roomId }) {
  const [serverUrl, setServerUrl] = useState('https://localhost:1234');

  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // ğŸ”´ React hook useEffectì— ëˆ„ë½ëœ ì¢…ì†ì„±: 'roomId'ì™€ 'serverUrl'
  // ...
}
```

ì˜ì¡´ì„±ì„ ì œê±°í•˜ë ¤ë©´ `linter`ê°€ ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ë‹¤ëŠ” ê²ƒì„ `"ì¦ëª…"`í•´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `serverUrl`ì„ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ì´ë™í•˜ì—¬ `ë°˜ì‘í˜•ì´ ì•„ë‹ˆë©° ì¬ë Œë”ë§ ì‹œ ë³€ê²½ë˜ì§€ ì•ŠìŒ`ì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
const serverUrl = 'https://localhost:1234'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹™ë‹ˆë‹¤.

function ChatRoom({ roomId }) {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]); // âœ… ì„ ì–¸ëœ ëª¨ë“  ì˜ì¡´ì„±
  // ...
}
```

ì´ì œ `serverUrl`ì€ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹ˆë¯€ë¡œ(ê·¸ë¦¬ê³  ë‹¤ì‹œ ë Œë”ë§í•  ë•Œ ë³€ê²½í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ) ì˜ì¡´ì„±ì´ ë  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. `Effect`ì˜ ì½”ë“œê°€ ë°˜ì‘í˜• ê°’ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì˜ì¡´ì„± ëª©ë¡ì€ ë¹„ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤(`[]`)

```tsx
const serverUrl = 'https://localhost:1234'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹™ë‹ˆë‹¤.
const roomId = 'music'; // ë” ì´ìƒ ë°˜ì‘í˜• ê°’ì´ ì•„ë‹™ë‹ˆë‹¤.

function ChatRoom() {
  useEffect(() => {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () => connection.disconnect();
  }, []); // âœ… ì„ ì–¸ëœ ëª¨ë“  ì˜ì¡´ì„±
  // ...
}
```

ë¹ˆ ì˜ì¡´ì„±ì´ ìˆëŠ” `Effect`ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ `Props`ë‚˜ `State`ê°€ ë³€ê²½ë˜ì–´ë„ ë‹¤ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### `Effect`ì˜ ì´ì „ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœ ì—…ë°ì´íŠ¸í•˜ê¸°

`Effect`ì˜ ì´ì „ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ë ¤ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setCount(count + 1); // ë§¤ì´ˆë§ˆë‹¤ ì¹´ìš´í„°ë¥¼ ì¦ê°€ì‹œí‚¤ë ¤ë©´...
    }, 1000)
    return () => clearInterval(intervalId);
  }, [count]); // ğŸš© ... í•˜ì§€ë§Œ ì˜ì¡´ì„±ìœ¼ë¡œ 'count'ë¥¼ ì§€ì •í•˜ë©´ í•­ìƒ ê°„ê²©ì´ ì¬ì„¤ì •ë©ë‹ˆë‹¤.
  // ...
}
```

`count`ëŠ” ë°˜ì‘í˜• ê°’ì´ë¯€ë¡œ ì˜ì¡´ì„± ëª©ë¡ì— ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë ‡ê²Œ í•˜ë©´ ì¹´ìš´íŠ¸ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ `Effect`ë¥¼ ì •ë¦¬í•˜ê³  ë‹¤ì‹œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤. ì´ëŠ” ì´ìƒì ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ë ¤ë©´ `c => c + 1` ìƒíƒœ ì—…ë°ì´í„°ë¥¼ `setCount`ì— ì „ë‹¬í•˜ì„¸ìš”.

```tsx
import { useState, useEffect } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const intervalId = setInterval(() => {
      setCount(c => c + 1); // âœ… state ì—…ë°ì´í„°ê°€ í†µê³¼
    }, 1000);
    return () => clearInterval(intervalId);
  }, []); // âœ… countëŠ” ì˜ì¡´ì„±ì´ ì—†ë‹¤.

  return <h1>{count}</h1>;
}
```

ì´ì œ `count + 1` ëŒ€ì‹  `c => c + 1`ì„ ì „ë‹¬í•˜ë¯€ë¡œ `Effect`ëŠ” ë” ì´ìƒ `count`ì— ì˜ì¡´í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì´ ìˆ˜ì •ìœ¼ë¡œ `count`ê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê°„ê²©ì„ ë‹¤ì‹œ ì •ë¦¬í•˜ê³  ì„¤ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

### ë¶ˆí•„ìš”í•œ ê°ì²´ ì¢…ì†ì„± ì œê±°í•˜ê¸°

`Effect`ê°€ ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ `ê°ì²´ ë˜ëŠ” í•¨ìˆ˜ì— ì˜ì¡´í•˜ëŠ” ê²½ìš°` ë„ˆë¬´ ìì£¼ ì‹¤í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì´ `Effect`ëŠ” **ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì˜µì…˜ ê°ì²´ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë Œë”ë§í•  ë•Œë§ˆë‹¤ ë‹¤ì‹œ ì—°ê²°**ë©ë‹ˆë‹¤.

```tsx
const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = { // ğŸš© ì´ objectëŠ” ë¦¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì²˜ìŒë¶€í„° ìƒˆë¡œ ìƒì„±
    serverUrl: serverUrl,
    roomId: roomId
  };

  useEffect(() => {
    const connection = createConnection(options); // Effect ë‚´ë¶€ì—ì„œ ì‚¬ìš©
    connection.connect();
    return () => connection.disconnect();
  }, [options]); // ğŸš© ê²°ê³¼ì ìœ¼ë¡œ ì´ëŸ¬í•œ ì˜ì¡´ì„±ì€ ë¦¬ë Œë”ë§í•  ë•Œë§ˆë‹¤ í•­ìƒ ë‹¬ë¼ì§‘ë‹ˆë‹¤.
  // ...
```

ë Œë”ë§ ì¤‘ì— ìƒì„±ëœ ì˜¤ë¸Œì íŠ¸ë¥¼ ì˜ì¡´ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”. ëŒ€ì‹  `Effect` ë‚´ì—ì„œ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ì„¸ìš”.

#### App.js

```tsx
import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() => {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () => connection.disconnect();
  }, [roomId]);

  return (
    <>
      <h1>Welcome to the {roomId} room!</h1>
      <input value={message} onChange={e => setMessage(e.target.value)} />
    </>
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    <>
      <label>
        Choose the chat room:{' '}
        <select
          value={roomId}
          onChange={e => setRoomId(e.target.value)}
        >
          <option value="general">general</option>
          <option value="travel">travel</option>
          <option value="music">music</option>
        </select>
      </label>
      <hr />
      <ChatRoom roomId={roomId} />
    </>
  );
}
```

#### Chart.js

```tsx
export function createConnection({ serverUrl, roomId }) {
  return {
    connect() {
      console.log('âœ… Connecting to "' + roomId + '" room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('âŒ Disconnected from "' + roomId + '" room at ' + serverUrl);
    }
  };
}
```

ì´ì œ `Effect` ë‚´ì—ì„œ `createOptions` í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ë©´ `Effect` ìì²´ëŠ” `roomId` ë¬¸ìì—´ì—ë§Œ ì˜ì¡´í•©ë‹ˆë‹¤. ì´ ìˆ˜ì •ìœ¼ë¡œ ì…ë ¥ì„ ì…ë ¥í•´ë„ ì±„íŒ…ì´ ë‹¤ì‹œ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ìƒì„±ë˜ëŠ” í•¨ìˆ˜ì™€ ë‹¬ë¦¬ `roomId`ì™€ ê°™ì€ ë¬¸ìì—´ì€ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ì§€ ì•ŠëŠ” í•œ ë³€ê²½ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì˜ì¡´ì„± ì œê±° ë°©ë²• ì²´í¬)

### `Effect`ì—ì„œ ìµœì‹  `Props` ë° `State` ì½ê¸°

> Reactì— ì¶œì‹œë˜ì§€ ì•Šì€ ì‹¤í—˜ì ì¸ APIì— ëŒ€í•´ ì„¤ëª…í•©ë‹ˆë‹¤.

ê¸°ë³¸ì ìœ¼ë¡œ `Effect`ì—ì„œ ë°˜ì‘í˜• ê°’ì„ ì½ì„ ë•ŒëŠ” ì˜ì¡´ì„±ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´ `Effect`ê°€ í•´ë‹¹ ê°’ì˜ ëª¨ë“  ë³€ê²½ì— "ë°˜ì‘"í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ì˜ì¡´ì„±ì—ì„œ ì›í•˜ëŠ” ë™ì‘ì…ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ë•Œë¡œëŠ” 'ë°˜ì‘'í•˜ì§€ ì•Šê³  `Effect`ì—ì„œ ìµœì‹  `Props`ê³¼ `State`ë¥¼ ì½ê³  ì‹¶ì„ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í˜ì´ì§€ ë°©ë¬¸ ì‹œë§ˆë‹¤ ì¥ë°”êµ¬ë‹ˆì— ìˆëŠ” í’ˆëª©ì˜ ìˆ˜ë¥¼ ê¸°ë¡í•œë‹¤ê³  ê°€ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.

```tsx
function Page({ url, shoppingCart }) {
  useEffect(() => {
    logVisit(url, shoppingCart.length);
  }, [url, shoppingCart]); // âœ… ì„ ì–¸ëœ ëª¨ë“  ì˜ì¡´ì„±
  // ...
}
```

URLì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìƒˆ í˜ì´ì§€ ë°©ë¬¸ì„ ê¸°ë¡í•˜ë˜ `shoppingCart`ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°ëŠ” ê¸°ë¡í•˜ì§€ ì•Šìœ¼ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜ìš”? ë°˜ì‘ì„± ê·œì¹™ì„ ìœ„ë°˜í•˜ì§€ ì•Šê³  `shoppingCart`ë¥¼ ì˜ì¡´ì„±ì—ì„œ ì œì™¸í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œê°€ `Effect` ë‚´ë¶€ì—ì„œ í˜¸ì¶œë˜ë”ë¼ë„ ë³€ê²½ ì‚¬í•­ì— 'ë°˜ì‘'í•˜ì§€ ì•Šë„ë¡ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `useEffectEvent Hook`ì„ ì‚¬ìš©í•˜ì—¬ `Effect Event`ë¥¼ ì„ ì–¸í•˜ê³  ê·¸ ì•ˆì— `shoppingCart`ë¥¼ ì½ëŠ” ì½”ë“œë¥¼ ì´ë™í•©ë‹ˆë‹¤.

```tsx
function Page({ url, shoppingCart }) {
  const onVisit = useEffectEvent(visitedUrl => {
    logVisit(visitedUrl, shoppingCart.length)
  });

  useEffect(() => {
    onVisit(url);
  }, [url]); // âœ… ì„ ì–¸ëœ ëª¨ë“  ì˜ì¡´ì„±
  // ...
}
```

`Effect event`ëŠ” ë°˜ì‘í˜•ì´ ì•„ë‹ˆë¯€ë¡œ `Effect`ì˜ ì˜ì¡´ì„±ì—ì„œ í•­ìƒ ìƒëµí•´ì•¼ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ë¹„ë°˜ì‘ì„± ì½”ë“œ(ì¼ë¶€ `Props` ë° `State`ì˜ ìµœì‹  ê°’ì„ ì½ì„ ìˆ˜ ìˆëŠ” ì½”ë“œ)ë¥¼ ê·¸ ì•ˆì— ë„£ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `onVisit` ë‚´ë¶€ì—ì„œ `shoppingCart`ë¥¼ ì½ìœ¼ë©´ `shoppingCart`ê°€ `Effect`ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ì— ì„œë¡œ ë‹¤ë¥¸ ì½˜í…ì¸  í‘œì‹œí•˜ê¸°

ì•±ì—ì„œ ì„œë²„ ë Œë”ë§ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°(ì§ì ‘ ë˜ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•´) ì»´í¬ë„ŒíŠ¸ëŠ” ë‘ ê°€ì§€ ë‹¤ë¥¸ í™˜ê²½ì—ì„œ ë Œë”ë§ë©ë‹ˆë‹¤. ì„œë²„ì—ì„œëŠ” ì´ˆê¸° HTMLì„ ìƒì„±í•˜ê¸° ìœ„í•´ ë Œë”ë§ë©ë‹ˆë‹¤. í´ë¼ì´ì–¸íŠ¸ì—ì„œ ReactëŠ” ë Œë”ë§ ì½”ë“œë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì—¬ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í•´ë‹¹ HTMLì— ì²¨ë¶€í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— `í•˜ì´ë“œë ˆì´ì…˜(ì„œë²„ì˜ ì´ˆê¸° HTML ìŠ¤ëƒ…ìƒ·ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì™„ì „í•œ ì¸í„°ë™í‹°ë¸Œ ì•±ìœ¼ë¡œ ì „í™˜)`ì´ ì‘ë™í•˜ë ¤ë©´ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ì—ì„œ ì´ˆê¸° ë Œë”ë§ ì¶œë ¥ì´ ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤.

ë“œë¬¼ì§€ë§Œ í´ë¼ì´ì–¸íŠ¸ì— ë‹¤ë¥¸ ì½˜í…ì¸ ë¥¼ í‘œì‹œí•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•±ì´ `localStorage`ì—ì„œ ì¼ë¶€ ë°ì´í„°ë¥¼ ì½ëŠ” ê²½ìš° ì„œë²„ì—ì„œëŠ” ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```tsx
function MyComponent() {
  const [didMount, setDidMount] = useState(false);

  useEffect(() => {
    setDidMount(true);
  }, []);

  if (didMount) {
    // ... í´ë¼ì´ì–¸íŠ¸ ì „ìš© JSX ë°˜í™˜ ...
  }  else {
    // ... ì´ˆê¸° JSX ë°˜í™˜ ...
  }
}
```

ì•±ì´ ë¡œë“œë˜ëŠ” ë™ì•ˆ ì‚¬ìš©ìëŠ” **ì´ˆê¸° ë Œë”ë§ ì¶œë ¥**ì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ° ë‹¤ìŒ ì•±ì´ ë¡œë“œë˜ê³  `í•˜ì´ë“œë ˆì´ì…˜(ì„œë²„ì˜ ì´ˆê¸° HTML ìŠ¤ëƒ…ìƒ·ì„ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì™„ì „í•œ ì¸í„°ë™í‹°ë¸Œ ì•±ìœ¼ë¡œ ì „í™˜)`ë˜ë©´ `Effect`ê°€ ì‹¤í–‰ë˜ê³  `didMount`ë¥¼ `true`ë¡œ ì„¤ì •í•˜ì—¬ ë¦¬ë Œë”ë§ì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ í´ë¼ì´ì–¸íŠ¸ ì „ìš© ë Œë”ë§ ì¶œë ¥ìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤. `Effect`ëŠ” ì„œë²„ì—ì„œ ì‹¤í–‰ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ ì´ˆê¸° ì„œë²„ ë Œë”ë§ ì¤‘ì— `didMount`ê°€ `false`ì¸ ì´ìœ ì…ë‹ˆë‹¤.

ì´ íŒ¨í„´ì€ ì•„ê»´ì„œ ì‚¬ìš©í•˜ì„¸ìš”. ì—°ê²° ì†ë„ê°€ ëŠë¦° ì‚¬ìš©ìëŠ” ì´ˆê¸° ì½˜í…ì¸ ë¥¼ ê½¤ ì˜¤ëœ ì‹œê°„(ìˆ˜ ì´ˆ) ë™ì•ˆ ë³´ê²Œ ë˜ë¯€ë¡œ ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ì–‘ì„ ê°‘ì‘ìŠ¤ëŸ½ê²Œ ë³€ê²½í•˜ê³  ì‹¶ì§€ ì•Šì„ ê²ƒì…ë‹ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ê²½ìš° CSSë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ê±´ë¶€ë¡œ ë‹¤ë¥¸ ê²ƒì„ í‘œì‹œí•¨ìœ¼ë¡œì¨ ì´ëŸ¬í•œ í•„ìš”ì„±ì„ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
